{"ast":null,"code":"import _toConsumableArray from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joriscarol/DEV/api-carousel/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import moment from\"moment\";import CircularProgress from\"@material-ui/core/CircularProgress\";import Card from\"@material-ui/core/Card\";import CardActions from\"@material-ui/core/CardActions\";import CardContent from\"@material-ui/core/CardContent\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import CardHeader from\"@material-ui/core/CardHeader\";import Avatar from\"@material-ui/core/Avatar\";import IconButton from\"@material-ui/core/IconButton\";import CardMedia from\"@material-ui/core/CardMedia\";import axios from\"axios\";import{ReactComponent as LikeSvg}from\"@svgr/webpack?-svgo,+titleProp,+ref!./image2vector.svg\";import\"./App.css\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={offset:0,posts:null,// Post pool\nlimit:7,// NÂ° of posts to fetch per API call \nindex:0,// Index of the post in the pool to render\nlazyOffset:4// Threshold value before a new API call is made\n};return _this;}_createClass(App,[{key:\"stateHandler\",value:function stateHandler(){}},{key:\"fetchPosts\",value:function(){var _fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this2=this;var _this$state,limit,offset;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://Requesting posts via state's API parameters.\n_this$state=this.state,limit=_this$state.limit,offset=_this$state.offset;axios({method:\"get\",url:\"https://api.slstice.com/mock/posts?offset=\".concat(offset,\"&limit=\").concat(limit,\"&api_key=ZkUvF7GBqc0l1Ou6DSPf\"),headers:{\"Content-Type\":\"application/json\"}}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref){var response,postArray;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:response=_ref.data.response;_context2.next=3;return Promise.all(// with the propper parameters, for every retrieved post.\nresponse.posts.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(post){var _ref4,media,_ref5,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:\"get\",url:\"https://api.slstice.com/mock/medias/\".concat(post.mediaId,\"?api_key=ZkUvF7GBqc0l1Ou6DSPf\"),headers:{\"Content-Type\":\"application/json\"}});case 2:_ref4=_context.sent;media=_ref4.data.response.media;_context.next=6;return axios({method:\"get\",url:\"https://api.slstice.com/mock/users/\".concat(media.owner.username,\"?api_key=ZkUvF7GBqc0l1Ou6DSPf\"),headers:{\"Content-Type\":\"application/json\"}});case 6:_ref5=_context.sent;user=_ref5.data.response.user;media.user=user;// Saving freshly fetched media and user object into post's properties.\npost.media=media;return _context.abrupt(\"return\",post);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref3.apply(this,arguments);};}())).catch(function(error){// Error ðŸ˜¨\nif(error.response){// The request was made and the server responded with a\nconsole.log(error.response.data);// status code that falls out of the range of 2xx\nconsole.log(error.response.status);console.log(error.response.headers);}else if(error.request){//  The request was made but no response was received, `error.request`\n//  is an instance of XMLHttpRequest in the browser and an instance\n//  of http.ClientRequest in Node.js  \nconsole.log(error.request);}else{// Something happened in setting up the request and triggered an Error\nconsole.log('Error',error.message);}});case 3:postArray=_context2.sent;return _context2.abrupt(\"return\",_this2.state.posts===null?_this2.setState({posts:postArray}):_this2.setState({posts:[].concat(_toConsumableArray(_this2.state.posts),_toConsumableArray(postArray))}));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());case 2:case\"end\":return _context3.stop();}}},_callee3,this);}));function fetchPosts(){return _fetchPosts.apply(this,arguments);}return fetchPosts;}()// The state loader is builded as a method that will handle :\n// I   - The lazy loading of the API requests.\n// II  - The cyclcling through API fetched posts.\n// III - The resulting compoponent's state assignation.\n},{key:\"stateLoader\",value:function(){var _stateLoader=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this3=this;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.state.posts===null||this.state.index>=this.state.posts.length-1-this.state.lazyOffset)){_context4.next=2;break;}return _context4.abrupt(\"return\",this.setState({offset:this.state.index},function(){return _this3.fetchPosts();}));case 2:// Itering the posts pool if posts is not null.\nthis.setState({index:this.state.index+1});case 3:case\"end\":return _context4.stop();}}},_callee4,this);}));function stateLoader(){return _stateLoader.apply(this,arguments);}return stateLoader;}()},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;this.stateLoader();// Call upon component mounting.\nsetTimeout(function(){// Slide loop.\n_this4.stateLoader();},6000);}},{key:\"render\",value:function render(){var _this$state2=this.state,posts=_this$state2.posts,index=_this$state2.index;if(!posts)// Rendering a spinner while there is no post to consume.\nreturn React.createElement(\"div\",{className:\"loaderContainer\"},React.createElement(CircularProgress,null));var mediaUrl=posts[index].media.urls.regular;// Assignation of the var needed\nvar avatar=posts[index].media.user.profile_images.medium||\"\";// for string interpolation.\nvar likeCount=posts[index].media.statistics.likes||\"0\";var personnePersonnes=likeCount<2?\"personne\":\"personnes\";var lastName=posts[index].media.user.last_name||\"\";var firstName=posts[index].media.user.first_name||\"\";var title=posts[index].title||\"Sans Titre\";var description=posts[index].description||\"Sans dÃ©scriptions\";var timeElapsed=moment(posts[index].media.statistics.created).format(\"D\")||\"\";var jourJours=timeElapsed<2?\"jour\":\"jours\";return React.createElement(\"div\",{className:\"App\"},React.createElement(Card,{className:\"card \"+this.state.classAnim},React.createElement(Grid,{container:true,spacing:0,direction:\"row\"},React.createElement(Grid,{item:true,lg:7,md:7,xl:7,xs:7,className:\"gridPicWrapper\",style:{overflow:\"hidden\"}},React.createElement(\"img\",{style:{width:\"100%\"},title:\"lorem ipsum\",src:mediaUrl,className:\"media\",alt:\"\"}),React.createElement(CardMedia,{style:{width:\"100%\",height:\"100%\"},title:\"lorem ipsum\",image:mediaUrl,className:\"canvaPic\"})),React.createElement(Grid,{item:true,lg:5,md:5,xl:5,xs:5,className:\"grid\"},React.createElement(CardHeader,{action:React.createElement(\"div\",{className:\"actionWrapper\"},React.createElement(Typography,{className:\"name\"},\"\".concat(lastName,\" \").concat(firstName)),React.createElement(Avatar,{className:\"avatar\",src:avatar}))}),React.createElement(CardContent,{className:\"vAlign\"},React.createElement(Typography,{variant:\"h4\",color:\"textSecondary\"},React.createElement(\"b\",null,title)),React.createElement(Typography,{variant:\"h6\",color:\"textSecondary\",component:\"p\"},description)),React.createElement(CardActions,{disableSpacing:true,className:\"like\"},React.createElement(IconButton,{\"aria-label\":\"Like the slide\"},React.createElement(LikeSvg,{height:\"25px\",width:\"25px\"})),React.createElement(Typography,null,likeCount,\" \",personnePersonnes)),React.createElement(Typography,{className:\"date\"},\"Il y a \",timeElapsed,\" \",jourJours)))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/joriscarol/DEV/api-carousel/src/App.js"],"names":["React","Component","moment","CircularProgress","Card","CardActions","CardContent","Grid","Typography","CardHeader","Avatar","IconButton","CardMedia","axios","App","props","state","offset","posts","limit","index","lazyOffset","method","url","headers","then","response","data","Promise","all","map","post","mediaId","media","owner","username","user","catch","error","console","log","status","request","message","postArray","setState","length","fetchPosts","stateLoader","setTimeout","mediaUrl","urls","regular","avatar","profile_images","medium","likeCount","statistics","likes","personnePersonnes","lastName","last_name","firstName","first_name","title","description","timeElapsed","created","format","jourJours","classAnim","overflow","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport moment from \"moment\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport axios from \"axios\";\nimport { ReactComponent as LikeSvg } from \"./image2vector.svg\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      offset: 0,  \n      posts: null,   // Post pool\n      limit: 7,      // NÂ° of posts to fetch per API call \n      index: 0,      // Index of the post in the pool to render\n      lazyOffset : 4 // Threshold value before a new API call is made\n    };\n  }\n\n  stateHandler(){\n    \n  }\n\n  async fetchPosts() {\n    //Requesting posts via state's API parameters.\n    const { limit, offset } = this.state; \n      axios({\n        method: \"get\",\n        url: `https://api.slstice.com/mock/posts?offset=${offset}&limit=${limit}&api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(async ({ data: { response } }) => {   // Mapping the responses to request the /medias/ endpoint\n          const postArray = await Promise.all(      // with the propper parameters, for every retrieved post.\n            response.posts.map(async post => {\n              const {\n                data: {\n                  response: { media }\n                }\n              } = await axios({\n                method: \"get\",\n                url: `https://api.slstice.com/mock/medias/${post.mediaId}?api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n              const {\n                data: {\n                  response: { user }\n                }\n              } = await axios({\n                method: \"get\",\n                url: `https://api.slstice.com/mock/users/${media.owner.username}?api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n              media.user = user;  // Saving freshly fetched media and user object into post's properties.\n              post.media = media;\n              return post;\n            }))\n            .catch((error) => {\n              // Error ðŸ˜¨\n              if (error.response) {                 // The request was made and the server responded with a\n                  console.log(error.response.data); // status code that falls out of the range of 2xx\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n              } else if (error.request) {\n               //  The request was made but no response was received, `error.request`\n               //  is an instance of XMLHttpRequest in the browser and an instance\n               //  of http.ClientRequest in Node.js  \n                  console.log(error.request);\n              } else {\n                  // Something happened in setting up the request and triggered an Error\n                  console.log('Error', error.message);\n              }\n          });\n            // Assignation of the newly fetched array of posts to the component's state.\n            // If post is null, return this.setState({ posts: postArray }). Else concatenate old state with new posts.\n            return this.state.posts === null\n            ? this.setState({ posts: postArray })\n            : this.setState({ posts: [...this.state.posts, ...postArray] });\n        });\n  }\n\n  // The state loader is builded as a method that will handle :\n  // I   - The lazy loading of the API requests.\n  // II  - The cyclcling through API fetched posts.\n  // III - The resulting compoponent's state assignation.\n  async stateLoader() {\n    // If the post pool is empty, or if theres no more post to render, minus the lazy offset trigger : \n    // Assign the correct value to the offset parameter, then fetch new posts\n    if (this.state.posts === null || this.state.index >= (this.state.posts.length - 1) - this.state.lazyOffset) {\n    // Thus we need to load the posts in the component's state. At this point in any cases,\n    // states have been properly updated.\n      return this.setState({ offset: this.state.index }, () => this.fetchPosts());\n    }\n    // Itering the posts pool if posts is not null.\n    this.setState({\n      index: this.state.index + 1\n    });\n}\n\n  componentDidMount() {\n    this.stateLoader();   // Call upon component mounting.\n    setTimeout(() => {    // Slide loop.\n      this.stateLoader(); \n    },6000);\n  }\n  \n  render() {\n    const { posts, index } = this.state;\n\n    if (!posts)   // Rendering a spinner while there is no post to consume.\n      return (\n        <div className=\"loaderContainer\">\n          <CircularProgress />\n        </div>\n      );\n\n    const mediaUrl = posts[index].media.urls.regular;                     // Assignation of the var needed\n    const avatar = posts[index].media.user.profile_images.medium || \"\";   // for string interpolation.\n    const likeCount = posts[index].media.statistics.likes || \"0\";\n    const personnePersonnes = likeCount < 2 ? \"personne\" : \"personnes\";\n    const lastName = posts[index].media.user.last_name || \"\";\n    const firstName = posts[index].media.user.first_name || \"\";\n    const title = posts[index].title || \"Sans Titre\";\n    const description = posts[index].description || \"Sans dÃ©scriptions\";\n    const timeElapsed = moment(posts[index].media.statistics.created).format(\"D\") || \"\";\n    const jourJours = timeElapsed < 2 ? \"jour\" : \"jours\";\n\n    return (\n      <div className=\"App\">\n        <Card className={\"card \" + this.state.classAnim}>\n          <Grid\n            container\n            spacing={0}\n            direction=\"row\"\n          >\n            <Grid\n              item\n              lg={7}\n              md={7}\n              xl={7}\n              xs={7}\n              className=\"gridPicWrapper\"\n              style={{ overflow: \"hidden\" }}\n            >\n              <img\n                style={{ width: \"100%\" }}\n                title=\"lorem ipsum\"\n                src={mediaUrl}\n                className=\"media\"\n                alt=\"\"\n              />\n              <CardMedia\n                style={{ width: \"100%\", height: \"100%\" }}\n                title=\"lorem ipsum\"\n                image={mediaUrl}\n                className=\"canvaPic\"\n              />\n            </Grid>\n            <Grid item lg={5} md={5} xl={5} xs={5} className=\"grid\">\n              <CardHeader\n                action={\n                  <div className=\"actionWrapper\">\n                    <Typography className=\"name\">\n                      {`${lastName} ${firstName}`}\n                    </Typography>\n                    <Avatar className=\"avatar\" src={avatar} />\n                  </div>\n                }\n              />\n              <CardContent className=\"vAlign\">\n                <Typography variant=\"h4\" color=\"textSecondary\">\n                  <b>{title}</b>\n                </Typography>\n                <Typography variant=\"h6\" color=\"textSecondary\" component=\"p\">\n                  {description}\n                </Typography>\n              </CardContent>\n              <CardActions disableSpacing className=\"like\">\n                <IconButton aria-label=\"Like the slide\">\n                  <LikeSvg height=\"25px\" width=\"25px\" />\n                </IconButton>\n                <Typography>\n                  {likeCount} {personnePersonnes}\n                </Typography>\n              </CardActions>\n              <Typography className=\"date\">\n                Il y a {timeElapsed} {jourJours}\n              </Typography>\n            </Grid>\n          </Grid>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}