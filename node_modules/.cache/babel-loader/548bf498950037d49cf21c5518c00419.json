{"ast":null,"code":"import axios from \"axios\";\n\nconst fetchPosts = async state => {\n  //Requesting posts via state's API parameters.\n  axios({\n    method: \"get\",\n    url: \"https://api.slstice.com/mock/posts?offset=\".concat(state.offset, \"&limit=\").concat(state.limit, \"&api_key=ZkUvF7GBqc0l1Ou6DSPf\"),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(async ({\n    data: {\n      response\n    }\n  }) => {\n    // Mapping the responses to request the /medias/ endpoint\n    const postArray = await Promise.all( // with the propper parameters, for every retrieved post.\n    response.posts.map(async post => {\n      const _ref = await axios({\n        method: \"get\",\n        url: \"https://api.slstice.com/mock/medias/\".concat(state.post.mediaId, \"?api_key=ZkUvF7GBqc0l1Ou6DSPf\"),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }),\n            media = _ref.data.response.media;\n\n      const _ref2 = await axios({\n        method: \"get\",\n        url: \"https://api.slstice.com/mock/users/\".concat(state.media.owner.username, \"?api_key=ZkUvF7GBqc0l1Ou6DSPf\"),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }),\n            user = _ref2.data.response.user;\n\n      media.user = user; // Saving freshly fetched media and user object into post's properties.\n\n      post.media = media;\n      return post;\n    })); // Assignation of the newly fetched array of posts to the component's state.\n    // If post is null, return this.setState({ posts: postArray }). Else concatenate old state with new posts.\n\n    return state.posts === null ? this.setState({\n      posts: postArray\n    }) : this.setState({\n      posts: [...state.posts, ...postArray]\n    });\n  });\n};\n\nexport default fetchPosts;","map":{"version":3,"sources":["/Users/joriscarol/DEV/api-carousel/src/fetchPosts.js"],"names":["axios","fetchPosts","state","method","url","offset","limit","headers","then","data","response","postArray","Promise","all","posts","map","post","mediaId","media","owner","username","user","setState"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,UAAU,GAAG,MAAOC,KAAP,IAAiB;AAClC;AAEAF,EAAAA,KAAK,CAAC;AACJG,IAAAA,MAAM,EAAE,KADJ;AAEJC,IAAAA,GAAG,sDAA+CF,KAAK,CAACG,MAArD,oBAAqEH,KAAK,CAACI,KAA3E,kCAFC;AAGJC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AAHL,GAAD,CAAL,CAMGC,IANH,CAMQ,OAAO;AAAEC,IAAAA,IAAI,EAAE;AAAEC,MAAAA;AAAF;AAAR,GAAP,KAAkC;AAAI;AAC1C,UAAMC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAR,EAAkB;AACxCH,IAAAA,QAAQ,CAACI,KAAT,CAAeC,GAAf,CAAmB,MAAMC,IAAN,IAAc;AAAA,mBAK3B,MAAMhB,KAAK,CAAC;AACdG,QAAAA,MAAM,EAAE,KADM;AAEdC,QAAAA,GAAG,gDAAyCF,KAAK,CAACc,IAAN,CAAWC,OAApD,kCAFW;AAGdV,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AAHK,OAAD,CALgB;AAAA,YAGfW,KAHe,QAE7BT,IAF6B,CAG3BC,QAH2B,CAGfQ,KAHe;;AAAA,oBAgB3B,MAAMlB,KAAK,CAAC;AACdG,QAAAA,MAAM,EAAE,KADM;AAEdC,QAAAA,GAAG,+CAAwCF,KAAK,CAACgB,KAAN,CAAYC,KAAZ,CAAkBC,QAA1D,kCAFW;AAGdb,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AAHK,OAAD,CAhBgB;AAAA,YAcfc,IAde,SAa7BZ,IAb6B,CAc3BC,QAd2B,CAcfW,IAde;;AAuB/BH,MAAAA,KAAK,CAACG,IAAN,GAAaA,IAAb,CAvB+B,CAuBX;;AACpBL,MAAAA,IAAI,CAACE,KAAL,GAAaA,KAAb;AACA,aAAOF,IAAP;AACD,KA1BD,CADsB,CAAxB,CADsC,CA8BtC;AACA;;AACA,WAAOd,KAAK,CAACY,KAAN,KAAgB,IAAhB,GACH,KAAKQ,QAAL,CAAc;AAAER,MAAAA,KAAK,EAAEH;AAAT,KAAd,CADG,GAEH,KAAKW,QAAL,CAAc;AAAER,MAAAA,KAAK,EAAE,CAAC,GAAGZ,KAAK,CAACY,KAAV,EAAiB,GAAGH,SAApB;AAAT,KAAd,CAFJ;AAGD,GAzCH;AA0CD,CA7CD;;AA+CA,eAAeV,UAAf","sourcesContent":["import axios from \"axios\";\n\nconst fetchPosts = async (state) => {\n  //Requesting posts via state's API parameters.\n\n  axios({\n    method: \"get\",\n    url: `https://api.slstice.com/mock/posts?offset=${state.offset}&limit=${state.limit}&api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(async ({ data: { response } }) => {   // Mapping the responses to request the /medias/ endpoint\n      const postArray = await Promise.all(      // with the propper parameters, for every retrieved post.\n        response.posts.map(async post => {\n          const {\n            data: {\n              response: { media }\n            }\n          } = await axios({\n            method: \"get\",\n            url: `https://api.slstice.com/mock/medias/${state.post.mediaId}?api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          const {\n            data: {\n              response: { user }\n            }\n          } = await axios({\n            method: \"get\",\n            url: `https://api.slstice.com/mock/users/${state.media.owner.username}?api_key=ZkUvF7GBqc0l1Ou6DSPf`,\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          media.user = user;  // Saving freshly fetched media and user object into post's properties.\n          post.media = media;\n          return post;\n        })\n      );\n      // Assignation of the newly fetched array of posts to the component's state.\n      // If post is null, return this.setState({ posts: postArray }). Else concatenate old state with new posts.\n      return state.posts === null\n        ? this.setState({ posts: postArray })\n        : this.setState({ posts: [...state.posts, ...postArray] });\n    });\n}\n\nexport default fetchPosts;"]},"metadata":{},"sourceType":"module"}